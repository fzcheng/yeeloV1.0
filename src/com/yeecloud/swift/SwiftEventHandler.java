package com.yeecloud.swift;import java.util.HashMap;import java.util.Iterator;import org.json.JSONException;import org.json.JSONObject;import android.app.Activity;import android.os.Bundle;import android.os.Handler;import android.os.Message;import android.text.TextUtils;import android.util.Log;import android.widget.Toast;import com.switfpass.pay.MainApplication;import com.switfpass.pay.activity.PayPlugin;import com.switfpass.pay.bean.RequestMsg;import com.tencent.mm.sdk.modelpay.PayReq;import com.yeecloud.Constant;import com.yeecloud.pay.k;public class SwiftEventHandler {	private static SwiftEventHandler b = new SwiftEventHandler();	private Activity d;	private k e;	final Handler a = new Handler() {		@Override		public void handleMessage(Message paramMessage) {			int i = paramMessage.what;			String str1 = (String) paramMessage.obj;			switch (i) {			case -1:				Toast.makeText(d, "网络异常", 0).show();				e.Failure();				break;			case 200:				try {					JSONObject localJSONObject = new JSONObject(str1);					int j = localJSONObject.getInt("code");					String str2 = localJSONObject.getString("msg");					if (j == 200) {						RequestMsg msg = new RequestMsg();	                    msg.setTokenId(localJSONObject.getString("token_id"));	                    // 微信wap支付	                    msg.setTradeType(MainApplication.PAY_WX_WAP);	                    Toast.makeText(d, "正常调起支付", 0).show();	                    PayPlugin.unifiedH5Pay(d, msg);	                    	                    String orderId = localJSONObject.getString("orderId");	                    e.Success(orderId);					} else {						e.Failure();						Toast.makeText(d, str2, 0).show();					}				} catch (JSONException localJSONException) {					Log.e("YeeWxPay",							"数据解析错误" + localJSONException.getMessage());					e.Failure();					Toast.makeText(d, "数据解析错误", 0).show();				}				break;			default:				e.Failure();				Toast.makeText(d, "服务器请求错误", 0).show();				break;			}		}	};	private String f;	public static SwiftEventHandler a() {		return b;	}	public void a(Activity paramActivity, Bundle paramBundle, k paramk) {		this.e = paramk;		this.d = paramActivity;		String str1 = paramBundle.getString("wxappid");		if (TextUtils.isEmpty(str1)) {			Toast.makeText(paramActivity, "请输入正确的wxappid", 0).show();			return;		}				String str2 = Constant.BASE_URL + "sdk/pay/swiftapp.do";		HashMap localHashMap = new HashMap();		if (paramBundle != null) {			Iterator localIterator = paramBundle.keySet().iterator();			while (localIterator.hasNext()) {				String str3 = (String) localIterator.next();				localHashMap.put(str3, paramBundle.getString(str3));			}		}		new SwiftPayThread(this, this.a, str2, localHashMap).start();	}}